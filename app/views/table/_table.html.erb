<%# 
fields: {field, title}[],
models: model[]
%>

<table class="w-full border-collapse text-left font-normal">
  <thead>
    <tr>
      <% fields.each do |field, index| %>
        <%= render "table/cell", row: "header", field_count: fields.length, field_index: index do %>
          <%= field[:title] %>
        <% end %>
      <% end %>
    </tr>
  </thead>
  <tbody>
    <% models.each do |model, model_index| %>
      <tr>
        <% fields.each do |field, field_index| %>
          <%= render "table/cell",
            row: (model_index == models.length - 1 ? "last-row" : "row"),
            field_count: fields.length,
            field_index: field_index do
          %>
            <%=
              if field.key?(:lambda)
                field[:lambda].call(model)
              else
                model[field[:field]]
              end
            %>
          <% end %>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>
